<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY cups-download-http "http://ftp.easysw.com/pub/cups/&cups-version;/cups-&cups-version;-source.tar.bz2">
  <!ENTITY cups-download-ftp  "ftp://ftp.easysw.com/pub/cups/&cups-version;/cups-&cups-version;-source.tar.bz2">
  <!ENTITY cups-md5sum        "4ce09b1dce09b6b9398af0daae9adf63">
  <!ENTITY cups-size          "8.7 MB">
  <!ENTITY cups-buildsize     "48 MB">
  <!ENTITY cups-time          "0.52 SBU (additional 69 SBU to run full test suite)">
]>

<sect1 id="cups" xreflabel="CUPS-&cups-version;">
  <?dbhtml filename="cups.html"?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>CUPS-&cups-version;</title>

  <indexterm zone="cups">
    <primary sortas="a-CUPS">CUPS</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to CUPS</title>

    <para>The Common Unix Printing System (CUPS) is a print spooler and
    associated utilities. It is based on the "Internet Printing
    Protocol" and provides printing services to most PostScript and raster
    printers.</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&cups-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&cups-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &cups-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &cups-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &cups-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &cups-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">CUPS Dependencies</bridgehead>

    <bridgehead renderas="sect4">Recommended</bridgehead>
    <para><xref linkend="libjpeg"/>,
    <xref linkend="libpng"/>,
    and <xref linkend="libtiff"/></para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para><xref linkend="openssl"/> or
    <ulink url="http://www.gnu.org/software/gnutls/">GnuTLS</ulink> (which needs
    <ulink url="ftp://ftp.gnupg.org/gcrypt/alpha/libgpg-error/">
    libgpg-error</ulink>,
    <ulink url="ftp://ftp.gnupg.org/gcrypt/libgcrypt/">libgcrypt</ulink> and
    <ulink url="ftp://ftp.gnupg.org/gcrypt/alpha/gnutls/opencdk/">opencdk</ulink>,
    in that order),
    <xref linkend="Linux_PAM"/>,
    <xref linkend="php"/>,
    <xref linkend="python"/>,
    <xref linkend="jdk"/>,
    <ulink url="http://www.openslp.org/">OpenSLP</ulink>,
    <ulink url="http://packages.debian.org/unstable/source/libpaper">
    libpaper</ulink> and
    <ulink url="http://valgrind.kde.org/">Valgrind</ulink> (optionally used if
    running the test suites)</para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of CUPS</title>

    <para>Create an <systemitem class="username">lp</systemitem> user, as
    <application>CUPS</application> will install the
    <command>lppasswd</command> command SUID to this user. Use the following
    command as the <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>useradd -c "Print Service User" -d /dev/null -g lp -s /bin/false lp</userinput></screen>

    <para>If you utilize <application>Linux-PAM</application>, you need to
    modify some files so <application>CUPS</application> can find needed headers.
    Make the appropriate modifications using the following command:</para>

<screen><userinput>sed -i -e "s@pam/pam@security/pam@g" \
{config-scripts/cups-pam.m4,scheduler/auth.c,configure}</userinput></screen>

    <para>Install <application>CUPS</application> by running the
    following commands:</para>

<screen><userinput>./configure &amp;&amp;
make</userinput></screen>

    <para>Now, as the <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para>The basic default behavior of the installation is appropriate for
    LFS systems. <application>CUPS</application> files are placed in
    <filename class="directory">/usr/bin</filename>,
    <filename class="directory">/usr/sbin</filename>,
    <filename class="directory">/var</filename> and
    <filename class="directory">/etc/cups</filename>.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring CUPS</title>

    <para>Configuration of <application>CUPS</application> is dependent on
    the type of printer and can be complex. Generally, PostScript printers
    are easier. For detailed instructions on configuration and use of
    <application>CUPS</application>, see <ulink
    url="http://www.cups.org/documentation.php"/>. The Software Administrators
    Manual and Software Users Manual are particularly useful.</para>

    <para>For non-PostScript printers to print with
    <application>CUPS</application>, you need to install
    <xref linkend="espgs"/> to convert PostScript to raster images
    and a driver (e.g., from <xref linkend="gimp-print"/>) to convert
    the resulting raster images to a form that the printer understands.
    <ulink url="http://www.linuxprinting.org/foomatic.html">Foomatic</ulink>
    drivers use Ghostscript to convert PostScript to a printable form directly,
    but this is considered to be a hack by
    <application>CUPS</application> developers.</para>

    <sect3  id="cups-init">
      <title>Boot Script</title>

      <para>During the install, <application>CUPS</application> created
      the startup file <command>/etc/rc.d/init.d/cups</command>. The file
      works, but you may want to change it to a more conventional
      LFS startup file by installing the script included in the
      <xref linkend="intro-important-bootscripts"/> package:</para>

      <indexterm zone="cups cups-init">
        <primary sortas="f-cups">cups</primary>
      </indexterm>

<screen role="root"><userinput>make install-cups</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>accept, cancel, cups-config, cupsaddsmb, cupsd, cupstestppd, disable,
        enable, lp, lpadmin, lpc, lpinfo, lpmove, lpoptions, lppasswd, lpq, lpr,
        lprm, lpstat, and reject</seg>
        <seg>libcups.[so,a], libcupsimage.[so,a], and various filters and backend
        drivers</seg>
        <seg>/etc/cups, /usr/include/cups, /usr/lib/cups, /usr/share/doc/cups,
        /usr/share/cups, /var/log/cups, and /var/spool/cups</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="accept">
        <term><command>accept</command></term>
        <listitem>
          <para>instructs the printing system to accept print jobs to the
          specified destinations.</para>
          <indexterm zone="cups accept">
            <primary sortas="b-accept">accept</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cancel-cups">
        <term><command>cancel</command></term>
        <listitem>
          <para>cancels existing print jobs from the print queues.</para>
          <indexterm zone="cups cancel-cups">
            <primary sortas="b-cancel">cancel</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cups-config">
        <term><command>cups-config</command></term>
        <listitem>
          <para>is a <application>CUPS</application>
          program configuration utility.</para>
          <indexterm zone="cups cups-config">
            <primary sortas="b-cups-config">cups-config</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cupsaddsmb">
        <term><command>cupsaddsmb</command></term>
        <listitem>
          <para>exports printers to the <application>Samba</application>
          software for use with Windows clients.</para>
          <indexterm zone="cups cupsaddsmb">
            <primary sortas="b-cupsaddsmb">cupsaddsmb</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cupsd">
        <term><command>cupsd</command></term>
        <listitem>
          <para>is the scheduler for the Common Unix Printing System.</para>
          <indexterm zone="cups cupsd">
            <primary sortas="b-cupsd">cupsd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cupstestppd">
        <term><command>cupstestppd</command></term>
        <listitem>
          <para>tests the conformance of PPD files.</para>
          <indexterm zone="cups cupstestppd">
            <primary sortas="b-cupstestppd">cupstestppd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="disable">
        <term><command>disable</command></term>
        <listitem>
          <para>stops the named printers or classes.</para>
          <indexterm zone="cups disable">
            <primary sortas="b-disable">disable</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="enable">
        <term><command>enable</command></term>
        <listitem>
          <para>starts the named printers or classes.</para>
          <indexterm zone="cups enable">
            <primary sortas="b-enable">enable</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lp-cups">
        <term><command>lp</command></term>
        <listitem>
          <para>submits files for printing or alters a pending job.</para>
          <indexterm zone="cups lp-cups">
            <primary sortas="b-lp">lp</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lpadmin">
        <term><command>lpadmin</command></term>
        <listitem>
          <para>configures printer and class queues provided by
          <application>CUPS</application>.</para>
          <indexterm zone="cups lpadmin">
            <primary sortas="b-lpadmin">lpadmin</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lpc-cups">
        <term><command>lpc</command></term>
        <listitem>
          <para> provides limited control over printer and class queues
          provided by <application>CUPS</application>.</para>
          <indexterm zone="cups lpc-cups">
            <primary sortas="b-lpc">lpc</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lpinfo">
        <term><command>lpinfo</command></term>
        <listitem>
          <para>lists the available devices or drivers known to the
          <application>CUPS</application> server.</para>
          <indexterm zone="cups lpinfo">
            <primary sortas="b-lpinfo">lpinfo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lpmove">
        <term><command>lpmove</command></term>
        <listitem>
          <para>moves the specified job to a new destination.</para>
          <indexterm zone="cups lpmove">
            <primary sortas="b-lpmove">lpmove</primary>
          </indexterm>
      </listitem>
      </varlistentry>

      <varlistentry id="lpoptions">
        <term><command>lpoptions</command></term>
        <listitem>
          <para>displays or sets printer options and defaults.</para>
          <indexterm zone="cups lpoptions">
            <primary sortas="b-lpoptions">lpoptions</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lppasswd">
        <term><command>lppasswd</command></term>
        <listitem>
          <para>adds, changes or deletes passwords in the
          <application>CUPS</application> digest password file
          <filename>passwd.md5</filename>.</para>
          <indexterm zone="cups lppasswd">
            <primary sortas="b-lppasswd">lppasswd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lpq-cups">
        <term><command>lpq</command></term>
        <listitem>
          <para>shows the current print queue status on the named printer.</para>
          <indexterm zone="cups lpq-cups">
            <primary sortas="b-lpq">lpq</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lpr-cups">
        <term><command>lpr</command></term>
        <listitem>
          <para>submits files for printing.</para>
          <indexterm zone="cups lpr-cups">
            <primary sortas="b-lpr">lpr</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lprm-cups">
        <term><command>lprm</command></term>
        <listitem>
          <para>cancels print jobs that have been queued for printing.</para>
          <indexterm zone="cups lprm-cups">
            <primary sortas="b-lprm">lprm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lpstat-cups">
        <term><command>lpstat</command></term>
        <listitem>
          <para>displays status information about the current classes, jobs,
          and printers.</para>
          <indexterm zone="cups lpstat-cups">
            <primary sortas="b-lpstat">lpstat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="reject">
        <term><command>reject</command></term>
        <listitem>
          <para>instructs the printing system to reject print jobs to the
          specified destinations.</para>
          <indexterm zone="cups reject">
            <primary sortas="b-reject">reject</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>

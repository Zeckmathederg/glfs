<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY gcc3-download-http "http://ftp.gnu.org/gnu/gcc/gcc-&gcc3-version;/gcc-&gcc3-version;.tar.bz2">
  <!ENTITY gcc3-download-ftp  "ftp://ftp.gnu.org/gnu/gcc/gcc-&gcc3-version;/gcc-&gcc3-version;.tar.bz2">
  <!ENTITY gcc3-md5sum        "a1c267b34f05c8660b24251865614d8b">
  <!ENTITY gcc3-size          "23 MB">
  <!ENTITY gcc3-buildsize     "489 MB">
  <!ENTITY gcc3-time          "5.72 SBU (additional 12.54 SBU to run the test suite)">
]>

<sect1 id="gcc3" xreflabel="GCC-&gcc3-version;">
  <?dbhtml filename="gcc3.html" ?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>GCC-&gcc3-version;</title>

  <indexterm zone="gcc3">
    <primary sortas="a-GCC-3-3">GCC-&gcc3-version;</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to GCC-&gcc3-version;</title>

    <para>The reason for installing
    <application>GCC</application>-&gcc3-version; is that
    some BLFS packages (such as compiled <application>Java</application>
    and <application>OpenOffice</application>) have not been updated to be
    compilable by <application>GCC</application>-&gcc-version;. Additionally,
    some pre-compiled packages may require the
    <application>GCC</application>-&gcc3-version; libraries.</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&gcc3-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&gcc3-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &gcc3-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &gcc3-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &gcc3-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &gcc3-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Required patch: <ulink
        url="&patch-root;/gcc-&gcc3-version;-no_fixincludes-1.patch"/></para>
      </listitem>
      <listitem>
        <para>Required patch: <ulink
        url="&patch-root;/gcc-&gcc3-version;-linkonce-1.patch"/></para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">GCC-&gcc3-version; Dependencies</bridgehead>
    <para><xref linkend="dejagnu"/> (required to run the full test suite)</para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of GCC-&gcc3-version;</title>

    <para>Install <application>GCC</application>-&gcc3-version; by running
    the following commands:</para>

<screen><userinput>patch -Np1 -i ../gcc-&gcc3-version;-no_fixincludes-1.patch &amp;&amp;
patch -Np1 -i ../gcc-&gcc3-version;-linkonce-1.patch &amp;&amp;
mkdir ../gcc-build &amp;&amp;
cd ../gcc-build &amp;&amp;
../gcc-&gcc3-version;/configure \
    --prefix=/opt/gcc-&gcc3-version; \
    --enable-shared --enable-languages=c,c++ \
    --enable-threads=posix &amp;&amp;
make bootstrap</userinput></screen>

    <para>If desired, run the test suite using the following commands. The
    <command>test_summary</command> commands create log files which can be
    compared to known good results located at <ulink
    url="http://linuxfromscratch.org/~randy/gcc-334-lfs-6.0-test_summary.log"/>
    and <ulink
    url="http://linuxfromscratch.org/~randy/gcc-334-lfs-6.0-test_summary_short.log"/>.</para>

<screen><userinput>make -k check &amp;&amp;
../gcc-3.3.4/contrib/test_summary >test_summary.log 2>&amp;1 &amp;&amp;
../gcc-3.3.4/contrib/test_summary | \
    grep -A7 Summ >test_summary_short.log 2>&amp;1</userinput></screen>

    <para>Now, as the <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make install &amp;&amp;
mv -v /opt/gcc-&gcc3-version;/lib/libstdc++.so.5* /usr/lib &amp;&amp;
ln -v -sf /usr/lib/libstdc++.so.5.0.6 /opt/gcc-&gcc3-version;/lib &amp;&amp;
ln -v -sf libstdc++.so.5.0.6 /opt/gcc-&gcc3-version;/lib/libstdc++.so.5 &amp;&amp;
chown -v -R root:root \
    /opt/gcc-&gcc3-version;/lib/gcc-lib/i686-pc-linux-gnu/&gcc3-version;/include</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><command>mkdir ../gcc-build; cd ../gcc-build</command>: The
    <application>GCC</application> development team recommends
    building in a separate directory.</para>

    <para><parameter>--enable-shared --enable-languages=c,c++
    --enable-threads=posix</parameter>: Configures
    <application>GCC</application> to build the
    <application>C</application> and <application>C++</application> compilers and
    enable the related <application>C++</application> options.</para>

    <para><command>mv -v /opt/gcc-&gcc3-version;/lib/libstdc++.so.5*
    /usr/lib</command>: Moves the <application>C++</application> libraries to the
    standard lib directory to avoid having to add
    <userinput>/opt/gcc-&gcc3-version;/lib</userinput> to
    <filename>/etc/ld.so.conf</filename>.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring GCC-&gcc3-version;</title>

    <sect3>
      <title>Configuration information</title>

      <xi:include xmlns:xi="http://www.w3.org/2003/XInclude" href="../../lib-config.xml"/>

      <para>If you only need the GCC-&gcc3-version; libraries, you may delete
      <filename>/opt/gcc-&gcc3-version;</filename>.</para>

      <para>Whenever you need to use GCC-&gcc3-version; instead of your system
      installed compiler, add
      <filename class="directory">/opt/gcc-&gcc3-version;/bin</filename> to the
      front of your <envar>PATH</envar> or (preferably) set the <envar>CC</envar>
      environment variable before compiling the concerned package.</para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>c++, cpp, g++, gcc, gccbug, gcov, and architecture specific
        names of these programs.</seg>
        <seg>libgcc_s.so, libiberty.a, libstdc++.[a,so], libsupc++.a, and other
        support libraries and files.</seg>
        <seg>/opt/gcc-&gcc3-version;</seg>
      </seglistitem>
    </segmentedlist>

    <bridgehead renderas="sect3">Short Descriptions</bridgehead>

    <para>The GCC-&gcc3-version; package contains the
    <command>gcc</command>-&gcc3-version; <application>C</application> and
    <application>C++</application> compilers and GCC-&gcc3-version;
    <filename>libstdc++.so</filename> that is required by some commercial and
    pre-compiled packages.</para>

  </sect2>

</sect1>

<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY subversion-download-http
  "http://archive.apache.org/dist/subversion/subversion-&subversion-version;.tar.bz2">
  <!ENTITY subversion-download-ftp  " ">
  <!ENTITY subversion-md5sum        "867fb0a5db00710cf8dce0bdfa094b3b">
  <!ENTITY subversion-size          "5.7 MB">
  <!ENTITY subversion-buildsize     "131 MB">
  <!ENTITY subversion-time          "1.1 SBU">
]>

<sect1 id="subversion" xreflabel="Subversion-&subversion-version;">
  <?dbhtml filename="subversion.html"?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>Subversion-&subversion-version;</title>

  <indexterm zone="subversion">
    <primary sortas="a-Subversion">Subversion</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to Subversion</title>

    <para>
      <application>Subversion</application> is a version control system that is
      designed to be a compelling replacement for <application>CVS</application>
      in the open source community. It extends and enhances
      <application>CVS</application>' feature set, while maintaining a similar
      interface for those already familiar with <application>CVS</application>.
      These instructions install the client and server software used to
      manipulate a <application>Subversion</application> repository. Creation of
      a repository is covered at <xref linkend="svnserver"/>.
    </para>

    &lfs71_checked;

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Download (HTTP): <ulink url="&subversion-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download (FTP): <ulink url="&subversion-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download MD5 sum: &subversion-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Download size: &subversion-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated disk space required: &subversion-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated build time: &subversion-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Subversion Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para role="required">
      <xref linkend="sqlite"/>, <xref linkend="apr-util"/>, and
      <xref linkend="neon"/> or
      <ulink url="http://code.google.com/p/serf/">serf</ulink>.
    </para>

    <para>
      If you require the <application>Berkeley DB</application> back-end hooks
      in <application>Subversion</application> to build or support BDB based
      repositories, you must have <application>APR-util</application> linked to
      the <application>Berkeley DB</application> library.
    </para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional">
      <xref linkend="python2"/> (required to run the test suite),
      <xref linkend="db"/>,
      <xref linkend="sqlite"/>,
      <xref linkend="cyrus-sasl"/>,
      <xref linkend="openssl"/>,
      <xref linkend="dbus-glib"/>,
      <xref linkend="gnome-keyring"/>,
      KWallet from KDE4 and
      <xref linkend="apache"/>.
    </para>

    <bridgehead renderas="sect4">Optional (for the Java Bindings)</bridgehead>
    <para role="optional">
      One of <xref linkend="icedtea6"/>, 
      <xref linkend="jdk"/>,
      <ulink url="http://www.inet.no/dante/">Dante</ulink>, or
      <ulink url="http://oss.software.ibm.com/developerworks/opensource/jikes/">Jikes</ulink>,
      and <xref linkend="junit"/> (to test the Java bindings)
    </para>

    <bridgehead renderas="sect4">Optional (for the SWIG Bindings)</bridgehead>
    <para role="optional">
      <ulink url="http://www.swig.org">SWIG</ulink> and
      <xref linkend="python2"/>.
      <!-- <xref linkend="ruby"/> broken just now -->
    </para>

    <para condition="html" role="usernotes">
      User Notes: <ulink url="&blfs-wiki;/subversion"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation of Subversion</title>

    <para>
      If you have the current version of <application>Apache</application>
      installed <application>Subversion</application> will try to compile
      <filename class="libraryfile">mod_dav_svn.so</filename> to use with
      <xref linkend="apache"/> and the build will fail. Fix the bug with
      the following sed (not needed with <application>Apache 2.2</application>):
    </para>

<screen><userinput>sed -i 's#save_errno#aprerr#' subversion/mod_dav_svn/util.c</userinput></screen>

    <para>
      Install <application>Subversion</application> by running the following
      commands:
    </para>

<screen><userinput>./configure --prefix=/usr --disable-static &amp;&amp;
make</userinput></screen>

    <para>
      If you have <xref linkend="doxygen"/> installed and you wish to build the
      API documentation, issue: <command>doxygen doc/doxygen.conf</command>.
    </para>

    <para>
      If you passed the <option>--enable-javahl</option> parameter to
      <command>configure</command> and wish to build the Java bindings, issue
      the following command:
    </para>

<screen><userinput>make javahl</userinput></screen>

    <para>
      <application>Perl</application> and/or <application>Python</application>
      <!-- ruby is currently b0rken <application>Ruby</application> -->
    </para>

    <para>
      If you have a multi core CPU and normally run <command>make</command> with
      multiple jobs (eg <command>make -j4</command>) then a bug in the
      <filename>Makefile</filename> will prevent the
      <application>Perl</application> bindings compiling correctly. Fix the
      <filename>Makefile</filename> with this sed:
    </para>

<screen><userinput>sed -i 's#Makefile.PL.in$#&amp; libsvn_swig_perl#' Makefile.in &amp;&amp;</userinput></screen>

    <para>
      To compile the <application>Perl</application> and/or
      <application>Python</application> bindings issue any or all of the
      following commands:
    </para>
<screen><userinput>make swig-pl &amp;&amp;
make swig-py</userinput></screen>

<!-- &amp;&amp;
make swig-rb -->

    <para>
      To test the results, issue: <command>make check</command>.
    </para>

    <para>
      To test the results of the Java bindings build, issue
      <command>make check-javahl</command>. Note you must have the
      <application>JUnit</application> testing framework installed.
    </para>

    <para>
      To test the results of any or all of the <application>SWIG</application>
      bindings, you can use the following commands:
    </para>

<screen><userinput>make check-swig-pl &amp;&amp;
make check-swig-py</userinput></screen>

<!-- &amp;&amp;
make check-swig-rb -->

    <para>
      Now, as the <systemitem class="username">root</systemitem> user:
    </para>

<screen role="root"><userinput>make install &amp;&amp;
install -v -m755 -d /usr/share/doc/subversion-&subversion-version; &amp;&amp;
cp      -v -R       doc/* \
                    /usr/share/doc/subversion-&subversion-version;</userinput></screen>

    <para>
      If you built the Java bindings, issue the following command as the
      <systemitem class="username">root</systemitem> user to install them:
    </para>

<screen role="root"><userinput>make install-javahl</userinput></screen>

    <para>
      If you built any of the <application>SWIG</application> bindings, issue
      any or all of the following commands as the
      <systemitem class="username">root</systemitem> user to install them:
    </para>

<screen role="root"><userinput>make install-swig-pl &amp;&amp;
make install-swig-py</userinput></screen>

<!-- &amp;&amp;
make install-swig-rb -->

    <para>
      In order for <application>Python</application> to automatically discover
      the bindings, add 
      <filename class="directory">/usr/lib/svn-python</filename> to the
      <envar>PYTHONPATH</envar> environment variable to the system or personal
      profiles.
    </para>
  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para>
      <option>--disable-static</option>: This stops it installing static
      versions of the libraries.
    </para>

    <para>
      <parameter>CC="gcc -std=gnu99"</parameter>: If you want to compile
      <filename class="libraryfile">mod_dav_svn.so</filename> to use with
      <application>Apache</application>, configure will complain that your C
      compiler is not the same as the one that compiled
      <application>Apache</application>. To prevent this happening you can add
      <parameter>CC="gcc -std=gnu99"</parameter> (or whatever
      <application>Apache</application> used) to the
      <command>configure</command> options.
    </para>
  </sect2>

  <sect2 role="configuration">
    <title>Configuring Subversion</title>

    <sect3 id="subversion-config">
      <title>Config Files</title>

      <para>
        <filename>~/.subversion/config</filename> and
        <filename>/etc/subversion/config</filename>
      </para>

      <indexterm zone="subversion subversion-config">
        <primary sortas="e-AA.subversion/config">~/.subversion/config</primary>
      </indexterm>

      <indexterm zone="subversion subversion-config">
        <primary sortas="e-etc-subversion-config">/etc/subversion/config</primary>
      </indexterm>
    </sect3>

    <sect3>
      <title>Configuration Information</title>

      <para>
        <filename>/etc/subversion/config</filename> is the
        <application>Subversion</application> system-wide configuration file.
        This file is used to specify defaults for different
        <command>svn</command> commands.
      </para>

      <para>
        <filename>~/.subversion/config</filename> is the user's personal
        configuration file. It is used to override the system-wide defaults set
        in <filename>/etc/subversion/config</filename>.
      </para>
    </sect3>
  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>
          svn, svnadmin, svndumpfilter, svnlook, svnserve, svnsync and
          svnversion
        </seg>
        <seg>
          libsvn*.so and optionally, a Java library, the mod_dav_svn.so, and
          and mod_authz_svn.so <application>Apache HTTP</application> DSO
          modules and various <application>Perl</application> and
          <application>Python</application>
          <!-- <application>Ruby</application> --> modules.
        </seg>
        <seg>
          /usr/include/subversion-1,
          /usr/lib/perl5/site_perl/&lfs-perl-version;/i686-linux/auto/SVN (optional),
          /usr/lib/perl5/site_perl/&lfs-perl-version;/i686-linux/SVN (optional),
          /usr/lib/ruby/site_ruby/x.x/i686-linux/svn (optional),
          /usr/lib/svn-javahl (optional),
          /usr/lib/svn-python (optional) and
          /usr/share/doc/subversion-&subversion-version;
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="svn">
        <term><command>svn</command></term>
        <listitem>
          <para>
            is a command-line client program used to access
            <application>Subversion</application> repositories.
          </para>
          <indexterm zone="subversion svn">
            <primary sortas="b-svn">svn</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnadmin">
        <term><command>svnadmin</command></term>
        <listitem>
          <para>
            is a tool for creating, tweaking or repairing a
            <application>Subversion</application> repository.
          </para>
          <indexterm zone="subversion svnadmin">
            <primary sortas="b-svnadmin">svnadmin</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svndumpfilter">
        <term><command>svndumpfilter</command></term>
        <listitem>
          <para>
            is a program for filtering <application>Subversion</application>
            repository dumpfile format streams.
          </para>
          <indexterm zone="subversion svndumpfilter">
            <primary sortas="b-svndumpfilter">svndumpfilter</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnlook">
        <term><command>svnlook</command></term>
        <listitem>
          <para>
            is a tool for inspecting a <application>Subversion</application>
            repository.
          </para>
          <indexterm zone="subversion svnlook">
            <primary sortas="b-svnlook">svnlook</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnrdump">
        <term><command>svnrdump</command></term>
        <listitem>
          <para>
            is a tool for dumping or loading a remote
            <application>Subversion</application> repository.
          </para>
          <indexterm zone="subversion svnrdump">
            <primary sortas="b-svnrdump">svnrdump</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnserve">
        <term><command>svnserve</command></term>
        <listitem>
          <para>
            is a custom standalone server program, able to run as a daemon
            process or invoked by SSH.
          </para>
          <indexterm zone="subversion svnserve">
           <primary sortas="b-svnserve">svnserve</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnsync">
        <term><command>svnsync</command></term>
        <listitem>
          <para>
            is a <application>Subversion</application> repository
            synchronisation tool.
          </para>
          <indexterm zone="subversion svnsync">
           <primary sortas="b-svnsync">svnsync</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnversion">
        <term><command>svnversion</command></term>
        <listitem>
          <para>
            is used to report the version number and state of a working
            <application>Subversion</application> repository copy.
          </para>
          <indexterm zone="subversion svnversion">
            <primary sortas="b-svnversion">svnversion</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libsvn_star">
        <term><filename class="libraryfile">libsvn_*.so</filename></term>
        <listitem>
          <para>
            are the support libraries used by the
            <application>Subversion</application> programs.
          </para>
          <indexterm zone="subversion libsvn_star">
            <primary sortas="c-libsvn_star">libsvn_*.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mod_authz_svn">
        <term><filename class="libraryfile">mod_authz_svn.so</filename></term>
        <listitem>
          <para>
            is a plug-in module for the <application>Apache</application> HTTP
            server, used to authenticate users to a
            <application>Subversion</application> repository over the Internet
            or an intranet.
          </para>
          <indexterm zone="subversion mod_authz_svn">
            <primary sortas="c-mod_authz_svn">mod_authz_svn.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mod_dav_svn">
        <term><filename class="libraryfile">mod_dav_svn.so</filename></term>
        <listitem>
          <para>
            is a plug-in module for the <application>Apache</application> HTTP
            server, used to make a <application>Subversion</application>
            repository available to others over the Internet or an intranet.
          </para>
          <indexterm zone="subversion mod_dav_svn">
            <primary sortas="c-mod_authz_svn">mod_dav_svn.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>

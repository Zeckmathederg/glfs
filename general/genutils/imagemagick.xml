<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY imagemagick-patch-version "9">
  <!-- Not sure what to do here as ImageMagick is one of the fastest-moving
       targets in all of open-source. One solution is to always use the last
       version of a specific major-minor from the 'legacy' subdirectory of
       the path in these URL's. Otherwise these links are broken within days
       after updates :-(  Unfortunately, versions always roll on after patch
       version 10, whether or not significant changes occur, and it takes
       time before versions migrate to legacy/  -->
  <!ENTITY imagemagick-download-http " ">
  <!ENTITY imagemagick-download-ftp  "ftp://ftp.imagemagick.org/pub/ImageMagick/ImageMagick-&imagemagick-version;-&imagemagick-patch-version;.tar.xz">
  <!ENTITY imagemagick-md5sum        "773d98dda1fe231d84dd0269dcdf6e65">
  <!ENTITY imagemagick-size          "7.3 MB">
  <!ENTITY imagemagick-buildsize     "256 MB typical (additional 69 MB if you run the Image::Magick demo)">
  <!ENTITY imagemagick-time          "4.2 SBU typical (Additional 8.1 SBU to run the test suite)">
]>

<!-- Editors: It is highly unlikely that the buildsize (disk space used) will
     be less than the figure shown above. Unless you have installed *all* the
     delegate dependencies, you will see a smaller buildsize, but what is
     currently listed above is the space one would require if all the
     dependencies are installed, which is what we want.

     Marked as 'typical' because nobody builds ALL the optional extras [ken]

     Also, please look over the output from the configure command for any
     additional dependencies that need to be listed, as ImageMagick is
     constantly adding additional features and dependencies. -->


<sect1 id="imagemagick"
xreflabel="ImageMagick-&imagemagick-version;-&imagemagick-patch-version;">
  <?dbhtml filename="imagemagick.html"?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>ImageMagick-&imagemagick-version;-&imagemagick-patch-version;</title>

  <indexterm zone="imagemagick">
    <primary sortas="a-ImageMagick">ImageMagick</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to ImageMagick</title>

    <para><application>ImageMagick</application> is a collection of tools and
    libraries to read, write, and manipulate an image in various image formats.
    Image processing operations are available from the command line. Bindings
    to various programming languages are also available.</para>

    &lfs71_checked;

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&imagemagick-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&imagemagick-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &imagemagick-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &imagemagick-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &imagemagick-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &imagemagick-time;</para>
      </listitem>
    </itemizedlist>

    <para>The <application>ImageMagick</application> source releases are
    updated frequently and the version shown above may no longer be available
    from the download locations. You can download a more recent version and use
    the existing BLFS instructions to install it. Chances are that it will
    work just fine, but this has not been tested by the BLFS team. If the
    package version shown above is not available from the locations shown
    above, or from the <filename class='directory'>legacy/</filename> directory
    at <literal>ftp.ImageMagick.org/pub/ImageMagick</literal> you can download it
    from the BLFS package server at
    <ulink
    url="&sources-anduin-http;/i/ImageMagick-&imagemagick-version;-&imagemagick-patch-version;.tar.xz"/>.
    </para>

    <bridgehead renderas="sect3">ImageMagick Dependencies</bridgehead>

    <bridgehead renderas="sect4">Recommended</bridgehead>
    <para role="recommended"><xref linkend="x-window-system"/></para>

    <para>The optional dependencies listed below should be installed if you
    need support for the specific format or the conversion tool the dependency
    provides. Many of the dependencies' capabilities and uses are described in
    the <quote>MAGICK DELEGATES</quote> section of the
    <filename>README.txt</filename> file located in the source tree. Additional
    information about the dependencies can be found in the
    <filename>Install-unix.txt</filename> file located in the source tree as
    well as issuing the <command>./configure --help</command> command. A
    summary of this information, as well as some additional notes can be viewed
    on-line at <ulink
    url="http://www.imagemagick.org/script/advanced-unix-installation.php"/>.</para>

    <bridgehead renderas="sect4">Optional System Utilities</bridgehead>
    <para role="optional"><xref linkend="pkgconfig"/>,
    <xref linkend="cups"/> or <xref linkend="LPRng"/> (or any other print
    utility that provides an <command>lpr</command> command),
    <ulink url="http://ufraw.sourceforge.net/">ufraw</ulink> (only for raw formats listed in
   <filename>www/formats.html</filename>),
    <ulink url="http://dmalloc.com/">Dmalloc</ulink>,
    <ulink url="http://perens.com/FreeSoftware/">Electric Fence</ulink>,
    <ulink url="http://www.gsp.com/support/virtual/email/pgp/">PGP</ulink>
    or <xref linkend="gnupg"/> or <xref linkend="gnupg2"/>
    (you'll have to do some hacking to use <application>GnuPG</application>),
    <xref linkend="sane"/>, and
    <xref linkend="wget"/>
    </para>

    <bridgehead renderas="sect4">Optional Graphics Libraries</bridgehead>
    <para role="optional"><ulink url="http://corefonts.sourceforge.net/">corefonts</ulink>,
    <ulink url="http://www.i3a.org/i_flashpix.html">FlashPIX</ulink> (or
    <ulink url="ftp://ftp.imagemagick.org/pub/ImageMagick/delegates/libfpx-1.3.0-1.tar.bz2">
    FlashPIX library</ulink>),
    <xref linkend="freetype2"/>,
    <xref linkend="jasper"/>,
    <ulink url="http://www.cl.cam.ac.uk/~mgk25/jbigkit/">JBIG-KIT</ulink>,
    <xref linkend="lcms"/> or
    <ulink url="http://sourceforge.net/projects/lcms/files/">lcms2</ulink>,
    <xref linkend="libexif"/>,
    <xref linkend="libjpeg"/>,
    <xref linkend="libpng"/>,
    <xref linkend="librsvg"/>,
    <xref linkend="libtiff"/>,
    <xref linkend="pango"/>,
    <ulink url="http://www.webmproject.org/code/">libwebp</ulink>, and
    <xref linkend="libxml2"/>,
    <ulink url="http://djvu.sourceforge.net/">DjVuLibre</ulink>, and
    <ulink url="http://www.agocg.ac.uk/train/cgm/ralcgm.htm">RALCGM</ulink>
    </para>

    <bridgehead renderas="sect4">Optional Graphics Utilities</bridgehead>
    <para role="optional"><!-- <xref linkend="espgs"/> or --><xref linkend="gs"/>,
    <ulink url="http://www.artifex.com/downloads/">GhostPCL</ulink>,
    <xref linkend="gimp"/>,
    <ulink url="http://www.gnuplot.info/">Gnuplot</ulink>,
    <xref linkend="graphviz"/>,
    <ulink url="http://www.povray.org/">POV-Ray</ulink>, and
    <ulink url="http://radsite.lbl.gov/radiance/HOME.html">Radiance</ulink>
    </para>

    <bridgehead renderas="sect4">Optional Conversion Tools</bridgehead>
    <para role="optional"><ulink url="http://autotrace.sourceforge.net/">AutoTrace</ulink>,
    <xref linkend="enscript"/>,
    <ulink url="http://www.gnu.org/software/hp2xx/">hp2xx</ulink>,
    <ulink url="http://user.it.uu.se/~jan/html2ps.html">html2ps</ulink>,
    <ulink url="http://wvware.sourceforge.net/">libwmf</ulink>,
    <ulink url="http://www.mpeg.org/MSSG/">MPEG-2 Video Codec</ulink>,
    <ulink url="http://netpbm.sourceforge.net/">Netpbm</ulink>,
    <!--<xref linkend="tetex"/> or--> <xref linkend="texlive"/>,
    <ulink url="http://www.xfig.org/">Transfig</ulink>,
    <ulink url="http://txt2html.sourceforge.net/">txt2html</ulink>
    (requires Perl Module
    <ulink url="http://cpan.org/authors/id/J/JS/JSTENZEL/Getopt-ArgvFile-1.11.tar.gz">
    Getopt::ArgvFile</ulink>), and
    <ulink url="http://www.cs.utah.edu/gdc/projects/urt/">Utah Raster Toolkit</ulink>
    <!-- url="http://www.funet.fi/pub/graphics/packages/Utah-Raster-Toolkit/rel3/urt-3.1b.mlg.tar.gz"> -->
    (or <ulink url="http://www.mcmurchy.com/urt/urt-3.1b.tar.gz">URT-3.1b</ulink>)
    </para>

    <para condition="html" role="usernotes">User Notes:
    <ulink url="&blfs-wiki;/imagemagick"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of ImageMagick</title>

    <para>Install <application>Imagemagick</application> by running the following
    commands:</para>

<screen><userinput>./configure --prefix=/usr --sysconfdir=/etc \
  --with-modules &amp;&amp;
make</userinput></screen>

    <para>If you wish to build the <application>PerlMagick</application>
    <application>perl</application> module, use the following commands:</para>

<screen><userinput>cd PerlMagick &amp;&amp;
perl Makefile.PL &amp;&amp;
make &amp;&amp;
cd ..</userinput></screen>

     <para>To test the results, issue: <command>make check</command>. Note that
     many of the tests require a working <application>ghostscript</application>
     (and it should be linked in - see the optional command below).</para>

     <para>Now, as the <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make install</userinput></screen>

    <para>And, if you built PerlMagick, still as the
    <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make -C PerlMagick install</userinput></screen>

    <!-- Commenting this out for now as it is redundant to information
         that has already been presented, or is in the 'command explanations'
         section below.
    <sect3>
      <title>Additional Configure Options</title>

      <para>There are additional switches that can be passed to
      <application>ImageMagick</application> to customize the installation to
      your needs. See <filename>advanced-unix-installation.html</filename> in
      the <filename class='directory'>www</filename> directory.</para>

    </sect3>
    -->

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><parameter>--sysconfdir=/etc</parameter>: Put the directory of xml (and
    .icc) files at <filename class='directory'>/etc/ImageMagick</filename> instead of
    <filename class='directory'>/usr/etc/ImageMagick</filename>.</para>

    <para><parameter>--with-modules</parameter>: Enables support for dynamically
    loadable modules.</para>

    <para><option>--with-gslib=/usr/lib</option>: Enables support to use the
    Ghostscript shared library.</para>

    <para><option>--with-fpx</option>: Enables support to use the FlashPix
    library.</para>

    <para><option>--with-windows-font-dir=<replaceable>&lt;Some/Directory&gt;</replaceable></option>:
    This option specifies the directory where the Windows CoreFonts are
    installed.</para>

    <para>The options and parameters listed above are the only ones you should
    have to pass to the <command>configure</command> script to activate all the
    delegate dependencies. All other dependencies will be automatically
    detected and utilized in the build if they are installed.</para>

    <para><option>--disable-static</option>: This switch prevents
    the static libraries being built.</para>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>animate, compare, composite, conjure, convert, display,
        identify, import, Magick++-config, Magick-config, MagickCore-config,
        MagickWand-config, mogrify, montage, stream, and Wand-config</seg>
        <seg>libMagick.{so,a}, libMagickCore.{so,a} libMagick++.{so,a},
	libMagickWand.{so,a}, optionally the Magick.so Perl module, and
        numerous plugin modules</seg>
        <seg>/usr/include/Magick++, /usr/include/magick, /usr/include/wand,
        /usr/lib/ImageMagick-&imagemagick-version;,
        /usr/lib/perl5/site_perl/&lfs-perl-version;/i686-linux/auto/Image/Magick,
        /usr/share/ImageMagick-&imagemagick-version; and
        /usr/share/doc/ImageMagick-&imagemagick-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

    <varlistentry id="animate">
      <term><command>animate</command></term>
      <listitem>
        <para>animates a sequence of images.</para>
        <indexterm zone="imagemagick animate">
          <primary sortas="b-animate">animate</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="compare">
      <term><command>compare</command></term>
      <listitem>
        <para>compares an image to a reconstructed image.</para>
        <indexterm zone="imagemagick compare">
          <primary sortas="b-compare">compare</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="composite">
      <term><command>composite</command></term>
      <listitem>
        <para>composites various images into the given base image.</para>
        <indexterm zone="imagemagick composite">
          <primary sortas="b-composite">composite</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="conjure">
      <term><command>conjure</command></term>
      <listitem>
        <para>processes a MSL script to create an image.</para>
        <indexterm zone="imagemagick conjure">
          <primary sortas="b-conjure">conjure</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="convert">
      <term><command>convert</command></term>
      <listitem>
        <para>converts image(s) from one format to another.</para>
        <indexterm zone="imagemagick convert">
          <primary sortas="b-convert">convert</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="display">
      <term><command>display</command></term>
      <listitem>
        <para>displays an image.</para>
        <indexterm zone="imagemagick display">
          <primary sortas="b-display">display</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="identify">
      <term><command>identify</command></term>
      <listitem>
        <para>describes the format and characteristics of an image file.</para>
        <indexterm zone="imagemagick identify">
          <primary sortas="b-identify">identify</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="import">
      <term><command>import</command></term>
      <listitem>
        <para>captures an X window.</para>
        <indexterm zone="imagemagick import">
          <primary sortas="b-import">import</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="magick-config">
      <term><command>Magick-config</command> and
      <command>Magick++-config, MagickCore-config, MagickWand-config</command></term>
      <listitem>
        <para>show information about the installed versions of the
        <application>ImageMagick</application> Magick++, MagickCore and MagickWand libraries.</para>
        <indexterm zone="imagemagick magick-config">
          <primary sortas="b-Magick-config">Magick-config</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="mogrify">
      <term><command>mogrify</command></term>
      <listitem>
        <para>transforms an image.</para>
        <indexterm zone="imagemagick mogrify">
          <primary sortas="b-mogrify">mogrify</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="montage">
      <term><command>montage</command></term>
      <listitem>
        <para>composites various images into a new image.</para>
        <indexterm zone="imagemagick montage">
          <primary sortas="b-montage">montage</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="stream">
      <term><command>stream</command></term>
      <listitem>
        <para>streams one or more pixel components of an image or
         portion of the image to your choice of storage formats.</para>
        <indexterm zone="imagemagick stream">
          <primary sortas="b-stream">stream</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="wand-config">
      <term><command>Wand-config</command></term>
      <listitem>
        <para>shows the options required to use the Wand library.</para>
        <indexterm zone="imagemagick wand-config">
          <primary sortas="b-Wand-config">Wand-config</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="perlmagick">
      <term><filename class='libraryfile'>Image::Magick</filename></term>
      <listitem>
        <para>allows the reading, manipulation and writing of a large number of
        image file formats using the <application>ImageMagick</application>
        library. Run <command>make</command> in the
        <filename class='directory'>PerlMagick/demo</filename> directory of
        the package source tree after the package is installed to see a nice
        demo of the module's capabilities.</para>
        <indexterm zone="imagemagick perlmagick">
          <primary sortas="g-Image-Magick">Image::Magick</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    </variablelist>

  </sect2>

</sect1>

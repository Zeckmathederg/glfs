<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY mplayer-download-http "http://www1.mplayerhq.hu/MPlayer/releases/MPlayer-&mplayer-version;.tar.bz2">
  <!ENTITY mplayer-download-ftp  "ftp://ftp1.mplayerhq.hu/MPlayer/releases/MPlayer-&mplayer-version;.tar.bz2">
  <!ENTITY mplayer-md5sum        "5fadd6957d3aab989cd760ff38fb8fdf">
  <!ENTITY mplayer-size          "6.8 MB">
  <!ENTITY mplayer-buildsize     "97 MB (additional 22 MB for essential CODECs)">
  <!ENTITY mplayer-time          "2.0 SBU">

  <!ENTITY mplayer-codec         "essential-20050412.tar.bz2">
  <!ENTITY mplayer-codec-md5sum  "5fe89bb095bdf9b4f9cda5479dbde906">
  <!ENTITY mplayer-codec-size    "9.3 MB">

  <!ENTITY mplayer-skin          "Blue-1.4.tar.bz2">
  <!ENTITY mplayer-skin-md5sum   "05dd8e4f11a715c9e5d2abf1cdeb907c">
  <!ENTITY mplayer-skin-size     "221 KB">

  <!ENTITY mplayer-font          "font-arial-iso-8859-1">
  <!ENTITY mplayer-font-md5sum   "1ecd31d17b51f16332b1fcc7da36b312">
  <!ENTITY mplayer-font-size     "234 KB">
]>

<sect1 id="mplayer" xreflabel="MPlayer-&mplayer-version;">
  <?dbhtml filename="mplayer.html"?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>MPlayer-&mplayer-version;</title>

  <indexterm zone="mplayer">
    <primary sortas="a-MPlayer">MPlayer</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to MPlayer</title>

    <para>The <application>MPlayer</application> package contains an audio/video
    player controlled via the command line or a graphical interface which is able
    to play almost every popular audio and video file format and CODEC
    (COder/DECoder, also COmpressor/DECompressor). With supported video
    hardware and additional drivers, <application>MPlayer</application> can play
    video files without an <application>X Window System</application> installed.</para>

    <para>For <application>MPlayer</application> general information and
    available features, including a full list of file formats, CODECs and
    output devices supported by <application>MPlayer</application>, visit the
    <ulink url="http://www1.mplayerhq.hu/homepage/design7/info.html">
    <application>MPlayer</application> web site</ulink>.</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&mplayer-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&mplayer-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &mplayer-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &mplayer-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &mplayer-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &mplayer-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>

    <itemizedlist spacing='compact'>
      <title>Patches</title>
      <listitem>
        <para>Required Patch (for fbdev driver support): <ulink
        url="&patch-root;/MPlayer-&mplayer-version;-kernel_2.6-1.patch"/></para>
      </listitem>
    </itemizedlist>

    <itemizedlist spacing='compact'>
      <title>CODECs</title>
      <listitem>
        <para>Proprietary CODECs: <ulink
        url="http://www.mplayerhq.hu/MPlayer/releases/codecs/&mplayer-codec;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &mplayer-codec-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &mplayer-codec-size;</para>
      </listitem>
        <listitem><para>Additional CODECs: <ulink
        url="http://www.mplayerhq.hu/MPlayer/releases/codecs/"/></para>
      </listitem>
    </itemizedlist>

    <itemizedlist spacing='compact'>
      <title>Skins</title>
      <listitem>
        <para>Default GUI skin: <ulink
        url="http://www1.mplayerhq.hu/MPlayer/Skin/&mplayer-skin;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &mplayer-skin-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &mplayer-skin-size;</para>
      </listitem>
      <listitem>
        <para>Additional skins: <ulink
        url="http://www1.mplayerhq.hu/MPlayer/Skin/"/></para>
      </listitem>
    </itemizedlist>

    <itemizedlist spacing='compact'>
      <title>Fonts</title>
      <listitem>
        <para>Prerendered fonts: <ulink
        url="http://www1.mplayerhq.hu/MPlayer/releases/fonts/&mplayer-font;.tar.bz2"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &mplayer-font-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &mplayer-font-size;</para>
      </listitem>
      <listitem>
        <para>Additional fonts: <ulink
        url="http://www1.mplayerhq.hu/MPlayer/releases/fonts/"/></para>
      </listitem>
    </itemizedlist>

    <note>
      <para>The CODECs, skins and fonts are not required to
      build and use <application>MPlayer</application>.</para>
    </note>

    <bridgehead renderas="sect3">MPlayer Dependencies</bridgehead>

    <bridgehead renderas="sect4">Optional Input Drivers and Libraries</bridgehead>
    <para><xref linkend="cdparanoia"/>,
    <xref linkend="libdv"/>,
    <xref linkend="libdvdread"/>,
    <xref linkend="samba3"/>,
    <ulink url="http://www.live.com/mplayer/">LIVE.COM Streaming Media</ulink>,
    <ulink url="http://www.matroska.org/downloads/linux.html">libmatroska</ulink>
    (requires
    <ulink url="http://dl.matroska.org/downloads/libebml/">libebml</ulink>),
    <ulink url="http://www.linuxtv.org/">DVB drivers</ulink>
    and <ulink url="http://www.metzlerbros.org/dvb/">DVB</ulink></para>

    <bridgehead renderas="sect4">Optional Audio Output Drivers and Libraries</bridgehead>
    <para><xref linkend="alsa"/>,
    <xref linkend="arts"/>,
    <xref linkend="esound"/>,
    <xref linkend="nas"/>,
    <xref linkend="sdl"/> (also used for video output),
    <xref linkend="xmms"/>,
    <ulink url="http://0pointer.de/lennart/projects/polypaudio/">Polypaudio</ulink>,
    <ulink url="http://bio2jack.sourceforge.net/">bio2jack</ulink> (requires
    <ulink url="http://jackit.sourceforge.net/">JACK</ulink>)</para>

    <bridgehead renderas="sect4">Optional Video Output Drivers and Libraries</bridgehead>
    <para>X (<xref linkend="xfree86"/> or <xref linkend="xorg"/>),
    <xref linkend="libpng"/>,
    <xref linkend="libjpeg"/>,
    <xref linkend="libungif"/> or <xref linkend="giflib"/>,
    <xref linkend="GTK"/>,
    <xref linkend="freetype2"/>,
    <xref linkend="fontconfig"/>,
    <xref linkend="aalib"/>,
    <xref linkend="fribidi"/>,
    <ulink url="http://www.directfb.org/">DirectFB</ulink>,
    <ulink url="http://www.svgalib.org/">SVGAlib</ulink>,
    <ulink url="http://www.ggi-project.org/">GGI</ulink>,
    <ulink url="http://sam.zoy.org/projects/libcaca/">libcaca</ulink>,
    <ulink url="http://www.ladspa.org/">LADSPA</ulink>,
    <ulink url="http://dxr2.sourceforge.net/">Dxr2</ulink>,
    <ulink url="http://dxr3.sourceforge.net/">libdxr3</ulink>,
    <ulink url="http://prdownloads.sourceforge.net/zapping/">MP1E</ulink> and
    <ulink url="http://trific.ath.cx/software/enca/">Enca</ulink></para>

    <bridgehead renderas="sect4">Optional CODECs</bridgehead>
    <para><xref linkend="libvorbis"/>,
    <xref linkend="xvid"/>,
    <xref linkend="LZO"/>,
    <xref linkend="libmad"/>,
    <xref linkend="lame"/>,
    <xref linkend="libfame"/>,
    <ulink url="http://www.theora.org/">Theora</ulink>,
    <ulink url="http://www.xiph.org/ogg/vorbis/index.html">Tremor</ulink>,
    <ulink url="http://sourceforge.net/projects/faac">FAAD2</ulink>,
    <ulink url="http://www.divx.com/divx/linux/">DivX4Linux</ulink>,
    <ulink url="http://sourceforge.net/projects/toolame">TooLAME</ulink>,
    <ulink url="http://www.dolda2000.cjb.net/~fredrik/lirccd/">lirccd</ulink>
    and <ulink url="http://www.lirc.org/">LIRC</ulink></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of MPlayer</title>

    <sect3>
      <title>CODEC Installation (Optional)</title>

      <para>If you downloaded any proprietary CODECs (which can provide support
      for additional audio and video formats such as Real, Indeo and QuickTime),
      extract them to <filename class="directory">/usr/lib/mplayer/codecs</filename>
      using the following commands as the <systemitem
      class="username">root</systemitem> user (substitute and/or add different
      CODEC filenames, if necessary):</para>

<screen role="root"><userinput>install -v -d -m755 /usr/lib/mplayer/codecs &amp;&amp;
tar -jvxf ../&mplayer-codec; \
    -C /usr/lib/mplayer/codecs --strip-components=1 &amp;&amp;
chown -v -R root:root /usr/lib/mplayer/codecs</userinput></screen>

      <para>If you installed any CODECs, ensure you add
      <option>--with-codecsdir=/usr/lib/mplayer/codecs</option>
      to the <command>configure</command> script.</para>

    </sect3>

    <sect3>
      <title>GUI Installation (Optional)</title>

      <para>To enable building the GUI version of
      <application>MPlayer</application> (requires <xref linkend="GTK"/>), add
      <option>--enable-gui</option> to the <command>configure</command>
      script. You'll also need to extract at least one skin. Extract the desired
      skin and create the default location (as the <systemitem
      class="username">root</systemitem> user):</para>

<screen role="root"><userinput>install -v -d -m755 /usr/share/mplayer/Skin &amp;&amp;
tar -jvxf ../&mplayer-skin; \
    -C /usr/share/mplayer/Skin &amp;&amp;
chown -v -R root:root /usr/share/mplayer/Skin/Blue &amp;&amp;
chmod -v 0755 /usr/share/mplayer/Skin/Blue{,/icons} &amp;&amp;
ln -sfv Blue /usr/share/mplayer/Skin/default</userinput></screen>

    </sect3>

    <sect3>
      <title>Installing OSD and Subtitles Support (Optional)</title>

      <para>To enable OSD (On Screen Display) and subtitles support, add
      <option>--enable-menu</option> to the <command>configure</command>
      script. You'll also need to set up at least one font (see font installation
      instructions a little later).</para>

    </sect3>

    <sect3>
      <title>Main MPlayer Installation</title>

      <note>
        <para>The package maintainers recommend building without any
        optimizations.</para>
      </note>

      <para><application>MPlayer</application> can build a shared post-processing
      library from the internal <application>FFmpeg</application> package which
      other packages can link to. This requires <application>MPlayer</application>
      to link dynamically to this library instead of the default statically linked method.
      If you desire to build the shared library, add <option>--enable-shared-pp</option>
      and <option>--disable-fastmemcpy</option> to the <command>configure</command>
      script. The <option>--disable-fastmemcpy</option> parameter is required to
      avoid <computeroutput>undefined reference</computeroutput> errors when other
      packages link to the shared library.</para>

      <para>You may wish to examine the output from
      <command>./configure --help</command> to find out what additional
      parameters to <command>configure</command> are needed to include
      the dependencies you have installed on your system.</para>

      <para>Install <application>MPlayer</application> by running the following
      commands:</para>

<screen><userinput>patch -Np1 -i ../MPlayer-&mplayer-version;-kernel_2.6-1.patch &amp;&amp;
./configure --prefix=/usr --confdir=/etc/mplayer \
    --enable-largefiles &amp;&amp;
make</userinput></screen>

      <para>This package does not come with a test suite.</para>

      <para>Now, as the <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>make install &amp;&amp;
install -v -m755 -d /usr/share/doc/mplayer-&mplayer-version; &amp;&amp;
cp -v -R DOCS/* /usr/share/doc/mplayer-&mplayer-version;</userinput></screen>

      <para>Passing parameters to <command>configure</command> may result
      in the creation of <filename class='libraryfile'>libdha.so.1.0</filename>. If so,
      you may wish to create a symlink to this library in case other packages link
      to <filename class='libraryfile'>libdha.so</filename>. Use the following
      command as the <systemitem class="username">root</systemitem> user
      to create the symlink:</para>

<screen role="root"><userinput>ln -v -s libdha.so.1.0 /usr/lib/libdha.so</userinput></screen>

      <para>You will need <filename>codecs.conf</filename> only if you want to
      change its properties, as the main binary contains an internal copy of
      it. Ensure any changes you make to <filename>codecs.conf</filename> achieve
      the desired results, as incorrect entries in this file have been known to
      cause errors and render the player unusable. If necessary, create the file
      using the following command.</para>

<screen role="root"><userinput>install -m644 etc/codecs.conf /etc/mplayer</userinput></screen>

      <para>You may also want to copy all the default configuration files to
      <filename class='directory'>/etc/mplayer</filename> for future reference or
      more customization ability.</para>

<screen role="root"><userinput>install -m644 etc/*.conf /etc/mplayer</userinput></screen>

      <para><application>MPlayer</application> requires that the RTC run at a
      frequency of 1024 Hz.  Make this setting change at boot-time by adding
      a line to <filename>/etc/sysctl.conf</filename>:</para>

<screen role="root"><userinput>echo "dev.rtc.max-user-freq=1024" >> /etc/sysctl.conf</userinput></screen>

    </sect3>

    <sect3>
      <title>OSD and Subtitles Font Installation (Required if '--enable-menu' Was
      Passed to 'configure')</title>

      <para>The recommended method to set up a font for
      <application>MPlayer</application> is to link a TTF file to
      your <filename class="directory">~/.mplayer</filename> directory. A link
      should be created in each user's home directory who may use
      <application>MPlayer</application>. For example:</para>

<screen><userinput>install -v -m750 -d ~/.mplayer &amp;&amp;
ln -v -sf /usr/X11R6/lib/X11/fonts/TTF/luxisri.ttf \
    ~/.mplayer/subfont.ttf</userinput></screen>

      <para>There are several other ways to set up a font package. To use a
      prerendered <application>MPlayer</application> font package, extract
      and link one of the font tarballs using the following commands:</para>

<screen role="root"><userinput>tar -jvxf ../&mplayer-font;.tar.bz2 \
    -C /usr/share/mplayer/font &amp;&amp;
chown -v -R root:root /usr/share/mplayer/font &amp;&amp;
cd /usr/share/mplayer/font &amp;&amp;
ln -v -sf &mplayer-font;/font-arial-<replaceable>[font size]</replaceable>-iso-8859-1/* .</userinput></screen>

      <para>Available font sizes are 14, 18, 24 or 28.</para>

      <para>Additional information as well as additional methods to set up an
      <application>MPlayer</application> font package can be found at <ulink
      url="http://www.mplayerhq.hu/DOCS/HTML/en/subosd.html#mpsub-install"/>.</para>

    </sect3>

    <sect3>
      <title>Installation for DVD Playback (Optional)</title>

      <para>If you want DVD playback with <application>MPlayer</application>,
      you need to ensure a link exists between your DVD drive and
      <filename>/dev/dvd</filename>. If necessary, create the link using the
      following commands:</para>

<screen role="root"><userinput>cat &gt;&gt; /etc/udev/rules.d/24-dvd.rules &lt;&lt; "EOF"
<literal># Create a /dev/dvd symlink

KERNEL="<replaceable>[dvd drive]</replaceable>", SYMLINK="dvd"</literal>

EOF
udevstart</userinput></screen>

      <para>Replace <replaceable>[dvd drive]</replaceable> with whatever
      device is appropriate, for example <filename>hdc</filename>. If
      you don't know which device to choose, type:</para>

<screen><userinput>dmesg | grep DVD</userinput></screen>

      <para>It should result in an output like:</para>

<screen><computeroutput>hdc: Pioneer DVD-ROM ATAPIModel DVD-114 0110,
ATAPI CD/DVD-ROM drive</computeroutput></screen>

    </sect3>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring MPlayer</title>

    <sect3 id="mplayer-config">
      <title>Config Files</title>

      <para><filename>/etc/mplayer/*</filename> and
      <filename>~/.mplayer/*</filename></para>

      <indexterm zone="mplayer mplayer-config">
        <primary sortas="e-AA.mplayer">~/.mplayer/*</primary>
      </indexterm>

      <indexterm zone="mplayer mplayer-config">
        <primary sortas="e-etc-mplayer">/etc/mplayer/*</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Configuration Information</title>

      <para>Typically, there's no configuration required for the system-wide files
      in <filename class='directory'>/etc/mplayer</filename> (in fact, this
      directory is empty unless you copied the default files as mentioned above).
      Configuration can be accomplished by choosing the configuration button located
      on the <application>MPlayer</application> GUI. Any
      configuration changes made here will be copied to the user's
      <filename class='directory'>~/.mplayer</filename> directory.</para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>gmplayer, mplayer, and mencoder</seg>
        <seg>libdha.so and optionally, libpostproc.so</seg>
        <seg>~/.mplayer, /etc/mplayer, /usr/include/postproc, /usr/lib/mplayer,
        /usr/share/mplayer, and /usr/share/doc/mplayer-&mplayer-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="gmplayer">
        <term><command>gmplayer</command></term>
        <listitem>
          <para>is a symlink to <command>mplayer</command> which
          brings up the graphical user interface component of
          <application>MPlayer</application>.</para>
          <indexterm zone="mplayer gmplayer">
            <primary sortas="b-gmplayer">gmplayer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mplayer-prog">
        <term><command>mplayer</command></term>
        <listitem>
          <para> manages the input formats, the CODECs and
          the output formats to play video files, DVDs,
          (S)VCDs or network streams containing audio and/or video
          information on your system.</para>

          <para>Examples:</para>

<screen><userinput>mplayer -fs blfs.avi
mplayer -vo fbdev -fb /dev/fb0 dvd://1 \
    -aid 128 -sub en -framedrop
mplayer -fs vcd://1    # works both for VCDs and SVCDs
mplayer \
http://www.students.uni-marburg.de/~Klossa/hapkidofight_lo.mpg</userinput></screen>

          <para>For further information, look at the very good documentation included
          with the package in the source tree subdirectory
          <filename class="directory">DOCS</filename> (also installed at
          <filename class='directory'>/usr/share/doc/mplayer</filename>).</para>
          <indexterm zone="mplayer mplayer-prog">
            <primary sortas="b-mplayer">mplayer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mencoder">
        <term><command>mencoder</command></term>
        <listitem>
          <para>is used to encode any <application>MPlayer</application>
          playable movie to DivX4, <application>XviD</application> or any
          CODEC in <filename class='libraryfile'>libavcodec</filename> with
          PCM/MP3/VBRMP3 audio.</para>

          <para>Example:</para>

<screen><userinput>rm frameno.avi
mencoder -dvd 1 -aid 128 -ovc frameno -oac mp3lame \
-lameopts vbr=3 -o frameno.avi

<literal># mencoder should output bitrates for average encodings
# now, choose one you like best! In the following lines,
# replace &lt;bitrate&gt; and &lt;name.avi&gt; with statements of your
# personal liking.</literal>

mencoder -dvd 1 -aid 128 -oac copy -ovc lavc \
    -lavcopts vcodec=mpeg4:vpass=1:vhq:vbitrate=&lt;bitrate&gt; \
    -o &lt;name.avi&gt;
mencoder -dvd 1 -aid 128 -oac copy -ovc lavc \
    -lavcopts vcodec=mpeg4:vpass=2:vhq:vbitrate=&lt;bitrate&gt; \
    -o &lt;name.avi&gt;
mencoder -forceidx &lt;name.avi&gt;</userinput></screen>
          <indexterm zone="mplayer mencoder">
            <primary sortas="b-mencoder">mencoder</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libdha">
        <term><filename class='libraryfile'>libdha.so</filename></term>
        <listitem>
          <para>contains functions used by the
          <application>MPlayer</application> programs.</para>
          <indexterm zone="mplayer libdha">
            <primary sortas="c-libdha">libdha.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libpostproc">
        <term><filename class='libraryfile'>libpostproc.so</filename></term>
        <listitem>
          <para>is a post-processing filter library used by the
          <application>MPlayer</application> programs and other packages.</para>
          <indexterm zone="mplayer libpostproc">
            <primary sortas="c-libpostproc">libpostproc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>

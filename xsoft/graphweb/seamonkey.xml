<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY seamonkey-download-http
  "http://ftp.mozilla.org/pub/mozilla.org/seamonkey/releases/&seamonkey-version;/source/seamonkey-&seamonkey-version;.source.tar.bz2">
  <!ENTITY seamonkey-download-ftp
  "ftp://ftp.mozilla.org/pub/mozilla.org/seamonkey/releases/&seamonkey-version;/source/seamonkey-&seamonkey-version;.source.tar.bz2">
  <!ENTITY seamonkey-md5sum        "4af38acf517a8ab850e6aa7a6b085325">
  <!ENTITY seamonkey-size          "98 MB">
  <!ENTITY seamonkey-buildsize     "3.2 GB (48 MB installed)">
  <!ENTITY seamonkey-time          "26.6 SBU">
]>

<sect1 id="seamonkey" xreflabel="SeaMonkey-&seamonkey-version;">
  <?dbhtml filename="seamonkey.html" ?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>SeaMonkey-&seamonkey-version;</title>

  <indexterm zone="seamonkey">
    <primary sortas="a-SeaMonkey">SeaMonkey</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to SeaMonkey</title>

    <para>
      <application>SeaMonkey</application> is a browser suite, the Open Source
      sibling of <application>Netscape</application>. It includes the browser,
      composer, mail and news clients, and an IRC client. It is the follow-on
      to the Mozilla browser suite.
    </para>

    <para>
      The Mozilla project also hosts two subprojects that aim to satisfy the
      needs of users who don't need the complete browser suite or prefer to have
      separate applications for browsing and e-mail. These subprojects are
      <xref linkend="firefox"/> and <xref linkend="thunderbird"/>. Both are
      based on the <application>Mozilla</application> source code.
    </para>

    &lfs71_checked;

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Download (HTTP): <ulink url="&seamonkey-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download (FTP): <ulink url="&seamonkey-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download MD5 sum: &seamonkey-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Download size: &seamonkey-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated disk space required: &seamonkey-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated build time: &seamonkey-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Required patch if you're using <application>GCC-4.7</application>:
          <ulink url="&patch-root;/seamonkey-&seamonkey-version;_gcc-4.7-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">SeaMonkey Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para role="required">
      <xref linkend="alsa-lib"/>,
      <xref linkend="gtk2"/>,
      <xref linkend="zip"/> and
      <xref linkend="unzip"/>.
    </para>

    <bridgehead renderas="sect4">Recommended</bridgehead>
    <para role="recommended">
      <xref linkend="yasm"/> or <xref linkend="libvpx"/>
      (to allow <application>Seamonkey</application> to play webm videos).
    </para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional">
      <xref linkend="dbus-glib"/>,
      <xref linkend="startup-notification"/>,
      <xref linkend="sqlite"/>,
      <ulink url="http://hunspell.sourceforge.net/">Hunspell</ulink>,
      <ulink url="http://libevent.org/">Libevent</ulink>,
      <xref linkend="doxygen"/>,
      <xref linkend="gnome-vfs"/> and <xref linkend="libgnomeui"/>
      (for integration with <application>Gnome 2</application>),
      <xref linkend="libnotify"/>,
      <xref linkend="nspr"/>,
      <xref linkend="nss"/>,
      <xref linkend="wireless_tools"/>,
      <ulink url="http://www.valgrind.org/">Valgrind</ulink> (only for testing
      the jemalloc code) and
      <xref linkend="wget"/>
    </para>

    <para condition="html" role="usernotes">
      User Notes: <ulink url="&blfs-wiki;/seamonkey"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation of SeaMonkey</title>

    <para>
      The configuration of <application>SeaMonkey</application> is accomplished
      by creating a <filename>mozconfig</filename> file containing the desired
      configuration options. A default <filename>mozconfig</filename> file is
      created below. To see the entire list of available configuration options
      (and an abbreviated description of each one), issue
      <command>./configure --help</command>. You may also wish to review the
      entire file and uncomment any other desired options. Create the file by
      issuing the following command:
    </para>

<screen><?dbfo keep-together="auto"?><userinput>cat &gt; .mozconfig &lt;&lt; "EOF"
# If you have a multicore machine you can speed up the build by running
# several jobs at once, but if you have a single core, delete this line:
mk_add_options MOZ_MAKE_FLAGS="-j4"

# If you have installed Yasm delete this option:
ac_add_options --disable-webm

# If you have installed DBus-Glib delete this option:
ac_add_options --disable-dbus

# If you have installed wireless-tools delete this option:
ac_add_options --disable-necko-wifi

# If you have installed libnotify delete this option:
ac_add_options --disable-libnotify

# Uncomment these if you have installed them:
# ac_add_options --enable-startup-notification
# ac_add_options --enable-system-hunspell
# ac_add_options --enable-system-sqlite
# ac_add_options --with-system-libevent
# ac_add_options --with-system-libvpx
# ac_add_options --with-system-nspr
# ac_add_options --with-system-nss

mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/moz-build-dir
ac_add_options --disable-crashreporter
ac_add_options --disable-debug
ac_add_options --disable-installer
ac_add_options --disable-static
ac_add_options --disable-tests
ac_add_options --disable-updater
ac_add_options --enable-application=suite
ac_add_options --enable-shared
ac_add_options --enable-system-cairo
ac_add_options --enable-system-ffi
ac_add_options --prefix=/usr
ac_add_options --with-pthreads
ac_add_options --with-system-jpeg
ac_add_options --with-system-png
ac_add_options --with-system-zlib
EOF</userinput></screen>

    <para>
      Compile <application>SeaMonkey</application> by running the following
      command:
    </para>

<screen><userinput>patch -p1 &lt; ../seamonkey-&seamonkey-version;_gcc-4.7-1.patch &amp;&amp;
make -f client.mk &amp;&amp;
make -C moz-build-dir/suite/installer</userinput></screen>

    <para>
      This package does not come with a test suite. However, if
      <application>X</application> is running it can be launched
      from the build directory before installing with the command line:
      <userinput>moz-build-dir/mozilla/dist/seamonkey/seamonkey</userinput>
    </para>

    <para>
      Install <application>SeaMonkey</application> by issuing the following
      commands as the <systemitem class="username">root</systemitem> user:
    </para>

<screen role="root"><userinput>mkdir -p /usr/lib/seamonkey-&seamonkey-version; &amp;&amp;
tar xf moz-build-dir/mozilla/dist/seamonkey-&seamonkey-version;.en-US.linux-$(uname -m).tar.bz2 \
  -C /usr/lib/seamonkey-&seamonkey-version; --strip-components=1 &amp;&amp;
ln -s ../lib/seamonkey-&seamonkey-version;/seamonkey /usr/bin &amp;&amp;
mkdir -pv /usr/lib/mozilla/plugins &amp;&amp;
ln -svf ../mozilla/plugins /usr/lib/seamonkey-&seamonkey-version; &amp;&amp;
cp -v moz-build-dir/mozilla/dist/man/man1/seamonkey.1 /usr/share/man/man1</userinput></screen>

    <para>
      The above instructions just install the parts you need to run
      <application>Seamonkey</application>. If you want to compile
      <xref linkend="gnash"/>, the open source version of Flash, copy some
      headers that Gnash needs into /usr/include, as the
      <systemitem class="username">root</systemitem> user:
    </para>

<screen role="root"><userinput>mkdir /usr/include/npapi
cp mozilla/dom/plugins/base/*.h /usr/include/npapi</userinput></screen>

    <para>
      If you want to install the full <application>Seamonkey</application>
      development environment (Note, this installs more than half a gigabyte of
      extra files), as the <systemitem class="username">root</systemitem> user:
    </para>

<screen role="root"><userinput>make -C moz-build-dir install</userinput></screen>
  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para>
      <command>patch -p1 &lt;
      ../seamonkey-&seamonkey-version;_gcc-4.7-1.patch</command>: This patch
      fixes various files to ensure that <application>Seamonkey</application>
      compiles with <application>GCC 4.7</application>.
    </para>

    <para>
      <command>make -f client.mk</command>: Mozilla products are packaged to
      allow the use of a configuration file which can be used to pass the
      configuration settings to the <command>configure</command> command.
      <command>make</command> uses the <filename>client.mk</filename> file to
      get initial configuration and setup parameters.
    </para>

    <para>
      <command>make -C moz-build-dir/suite/installer</command>: this creates a
      tarball of the finished <application>Seamonkey</application>.
    </para>

    <para>
      <command>tar xf
      moz-build-dir/mozilla/dist/seamonkey-&seamonkey-version;.en-US.linux-$(uname -m).tar.bz2
      -C /usr/lib/seamonkey-&seamonkey-version; --strip-components=1</command>:
      this untars <application>Seamonkey</application> into
      /usr/lib/seamonkey-&seamonkey-version;.
    </para>

    <para>
      <command>ln -s ../mozilla/plugins
      /usr/lib/seamonkey-&seamonkey-version;</command>: this creates a symlink
      to <filename class="directory">/usr/lib/mozilla/plugins</filename> for the
      sake of compatibility, to keep all your plugins in the place mozilla
      plugins are normally found.
    </para>
  </sect2>

  <sect2 role="configuration">
    <title>Configuring SeaMonkey</title>

    <para>
      If you deleted the <option>--disable-webm</option> option from your
      <filename>mozconfig</filename>, your <application>Seamonkey</application>
      can play most youtube videos without the need for the flash plugin. To
      enable this, go to <ulink url="http://www.youtube.com/html5"/> and click
      on 'Join the HTML5 Trial' (needs cookies enabled).
    </para>

    <para>
      For installing various <application>SeaMonkey</application> plugins, refer
      to <ulink url="http://plugindoc.mozdev.org/linux.html">Mozdev's PluginDoc
      Project</ulink>.
    </para>

    <para>
      Along with using the <quote>Preferences</quote> menu to configure
      <application>SeaMonkey</application>'s options and preferences to suit
      individual tastes, finer grain control of many options is only available
      using a tool not available from the general menu system. To access this
      tool, you'll need to open a browser window and enter
      <systemitem role="url">about:config</systemitem> in the address bar. This
      will display a list of the configuration preferences and information
      related to each one. You can use the <quote>Filter:</quote> bar to enter
      search criteria and narrow down the listed items. Changing a preference
      can be done using two methods. One, if the preference has a boolean value
      (True/False), simply double-click on the preference to toggle the value
      and two, for other preferences simply right-click on the desired line,
      choose <quote>Modify</quote> from the menu and change the value. Creating
      new preference items is accomplished in the same way, except choose
      <quote>New</quote> from the menu and provide the desired data into the
      fields when prompted.
    </para>

    <tip>
      <para>
        There is a multitude of configuration parameters you can tweak to
        customize <application>SeaMonkey</application>. A very extensive list of
        these parameters can be found at
        <ulink url="http://preferential.mozdev.org/preferences.html"/>.
      </para>
    </tip>

    <para>
      If you use a desktop environment like <application>Gnome</application> or
      <application>KDE</application> you may wish to create a
      <filename>seamonkey.desktop</filename> file so that
      <application>Seamonkey</application> appears in the panel's menus. If you
      didn't enable <application>Startup-Notification</application> in your
      mozconfig change the StartupNotify line to false. As the
      <systemitem class="username">root</systemitem> user:
    </para>

<screen role="root"><userinput>cat &gt; /usr/share/applications/seamonkey.desktop &lt;&lt; "EOF"
[Desktop Entry]
Encoding=UTF-8
Type=Application
Name=Seamonkey
Comment=The Mozilla Suite
Icon=seamonkey
Exec=seamonkey
Categories=Network;GTK;Application;Email;Browser;WebBrowser;News;
StartupNotify=true
Terminal=false
EOF
ln -sv -f /usr/lib/seamonkey-&seamonkey-version;/chrome/icons/default/seamonkey.png /usr/share/pixmaps</userinput></screen>
  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>seamonkey</seg>
        <seg>
          Numerous libraries, browser, and email/newsgroup components, plugins,
          extensions, and helper modules installed in <filename
          class="directory">/usr/lib/seamonkey-&seamonkey-version;</filename>
        </seg>
        <seg>
          /usr/include/npapi and
          /usr/lib/seamonkey-&seamonkey-version;.
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="seamonkey-prog">
        <term><command>seamonkey</command></term>
        <listitem>
          <para>
            is the Mozilla browser/email/newsgroup/chat client suite.
          </para>
          <indexterm zone="seamonkey seamonkey-prog">
            <primary sortas="b-seamonkey">seamonkey</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>

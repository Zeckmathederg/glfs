<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY openoffice-download-http "http://download.openoffice.org/&openoffice-version;/source.html">
  <!ENTITY openoffice-download-ftp "ftp://ftp.ussg.iu.edu/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_source.tar.gz">
  <!ENTITY openoffice-md5sum        "20c10db97865ae4c51dc827d668b8939">
  <!ENTITY openoffice-size          "214 MB">
  <!ENTITY openoffice-buildsize     "2.8 GB">
  <!ENTITY openoffice-time          "75 SBU">
]>

<sect1 id="openoffice" xreflabel="OpenOffice-&openoffice-version;">
  <?dbhtml filename="openoffice.html" ?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>OpenOffice-&openoffice-version;</title>

  <indexterm zone="openoffice">
    <primary sortas="a-OpenOffice">OpenOffice</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to OpenOffice</title>

    <para><application>OpenOffice</application> is an office suite, the
    open source sibling of <application>StarOffice</application>.</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&openoffice-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&openoffice-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &openoffice-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &openoffice-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &openoffice-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &openoffice-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Required patch for gcc-&gcc-version;: <ulink
        url="&patch-root;/OOo_&openoffice-version;-gcc_3.4.2+_fixes-2.patch"/>
        </para>
      </listitem>
      <listitem>
        <para>Required patch for use with NPTL: <ulink
        url="&patch-root;/OOo_&openoffice-version;-nptl-1.patch"/></para>
      </listitem>
      <listitem>
        <para>Required patch if compiling with
        <application>JDK</application>-&jdk-src-version;: <ulink
        url="&patch-root;/OOo_&openoffice-version;-jdk_&jdk-src-version;_fix-1.patch"/>
        </para>
      </listitem>
      <listitem>
        <para>Required patch (Executable <command>test</command> is in
        <filename class="directory">/bin</filename>,
        not in <filename class="directory">/usr/bin</filename>): <ulink
        url="&patch-root;/OOo_&openoffice-version;-test_bin_loc-1.patch"/></para>
      </listitem>
      <listitem>
        <para>Required patch for STLport-4.6.2: <ulink
        url="&patch-root;/OOo_&openoffice-version;-STLport_4.6.2-1.patch"/></para>
      </listitem>
      <listitem>
        <para>Required patch for use with glibc-2.3.4: <ulink
        url="&patch-root;/OOo_&openoffice-version;-doublefree-1.patch"/></para>
      </listitem>
      <listitem>
        <para>Optional patch if you wish to use the system freetype:
        <ulink
        url="&patch-root;/OOo_&openoffice-version;-freetype-1.patch"/></para>
      </listitem>
      <listitem>
        <para>Optional patch if
        <application>Linux-PAM</application>-&Linux_PAM-version; is not installed:
        <ulink
        url="&patch-root;/OOo_&openoffice-version;-no_pam-1.patch"/></para>
      </listitem>
      <listitem>
        <para>STLport-4.6.2: <ulink
        url="http://www.stlport.org/archive/STLport-4.6.2.tar.gz"/></para>
      </listitem>
      <listitem>
        <para>The source TAR ball only contains English
        language help. A localized help content file may be available at: <ulink
        url="http://ftp.services.openoffice.org/pub/OpenOffice.org/contrib/helpcontent/"/>
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">OpenOffice Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para>X (<xref linkend="xfree86"/> or <xref linkend="xorg"/>),
    <xref linkend="zip"/>,
    <xref linkend="unzip"/>,
    <xref linkend="tcsh"/>, and
    <xref linkend="which"/>.</para>

    <bridgehead renderas="sect4">Recommended</bridgehead>
    <para><xref linkend="jdk"/>,
    <xref linkend="freetype2"/>,
    <xref linkend="pkgconfig"/>,
    <xref linkend="startup-notification"/>,
    <xref linkend="desktop-file-utils"/>,
    <xref linkend="apache-ant"/>,
    <xref linkend="libart_lgpl"/>, and
    <xref linkend="curl"/>.</para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para><xref linkend="Linux_PAM"/> and
    <xref linkend="nas"/>.</para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of OpenOffice</title>

    <para><application>OpenOffice</application> does not create a directory
    when you extract the TAR ball. Create a build directory and extract the
    source with the following commands:</para>

<screen><userinput>mkdir OOo-build &amp;&amp;
cd OOo-build &amp;&amp;
tar -zxf ../OOo_&openoffice-version;_source.tar.gz</userinput></screen>

    <para>Apply all of the downloaded patches:</para>

<screen><userinput>for PATCH in ../OOo_&openoffice-version;-*.patch
    do patch -Np1 -i ${PATCH}
done</userinput></screen>

    <para>Copy the STLport TAR ball into the source tree:</para>

<screen><userinput>cp ../STLport-4.6.2.tar.gz stlport/download/</userinput></screen>

    <para>STLport looks for the c++ headers in the wrong location. Put a
    temporary symlink in place to satisfy STLport:</para>

<screen role="root"><userinput>ln -sf /usr/include/c++/&gcc-version; /usr/g++-v3</userinput></screen>

    <para>Create a temprorary symlink to the JRE's
    <application>motif</application> libraries:</para>

<screen role="root"><userinput>ln -sf ${JAVA_HOME}/jre/lib/i?86/motif21/libmawt.so /usr/lib</userinput></screen>

    <para>If you want to optimize the build, edit
    <filename>solenv/inc/unxlngi4.mk</filename> and add the desired optimization
    flags to the <envar>CFLAGSOPT</envar> variable. Some users have reported
    problems with <option>-fomit-frame-pointer</option>. The best option
    is to not use any custom optimizations. The following command removes an
    incorrect <option>-mcpu</option> option in the above file:</para>

<screen><userinput>sed -i "s:\-mcpu=pentiumpro::" \
    solenv/inc/unxlngi4.mk</userinput></screen>

    <para>Configure <application>OpenOffice</application> using the following
    commands. You may build install sets for specific languages based on your
    preferences. Supply a comma separated list to the <envar>--with-lang=</envar>
    switch. If a particular component is not available in the language of your
    choice, the default will be US English. If you need other languages, be sure
    to add <parameter>ENUS</parameter> to the list; otherwise the build will
    fail:</para>

<screen><userinput>cd config_office/ &amp;&amp;
./configure --with-lang=ENUS \
    --with-dict=ENUS --without-fonts \
    --enable-libsn --with-system-zlib \
    --with-system-freetype \
    --with-system-curl --disable-fontooo \
    --enable-libart &amp;&amp;
cd ..</userinput></screen>

    <para><application>OpenOffice</application> fails to compile if
    <command>umask</command> is set to something exotic. The build can also
    fail if the <envar>LANG</envar> or <envar>LC_ALL</envar> environment
    variables are set. Use the following commands to change your
    environment accordingly:</para>

<screen><userinput>umask 0022 &amp;&amp;
unset LANG LC_ALL</userinput></screen>

    <para>Compile <application>OpenOffice</application> using the following
    commands:</para>

<screen><userinput>./bootstrap &amp;&amp;
bash -c "source LinuxIntelEnv.Set.sh; dmake"</userinput></screen>

    <para>If you have downloaded localized help content <filename>tgz</filename>
    files, you will need to untar them to the appropriate directory as shown
    below and then recreate the installation set:</para>

<screen><userinput>for i in ../helpcontent_*_unix.tgz
  do tar -C solver/645/unxlngi4.pro/pck -zxf $i
  done &amp;&amp;
rm -rf instsetoo/unxlngi4.pro &amp;&amp;
bash -c "source LinuxIntelEnv.Set.sh ; dmake"</userinput></screen>

    <para>Install <application>OpenOffice</application> using the following
    commands to install the US English language set. To install a localized
    version, replace the 01 with the international telephone country code for
    your country:</para>

<screen role="root"><userinput>cd instsetoo/unxlngi4.pro/01/normal &amp;&amp;
sed -i "s:^oo_home=.*:oo_home=openoffice:" install &amp;&amp;
./install --prefix=/opt &amp;&amp;
for appl in sagenda scalc sdraw sfax simpress slabel sletter \
    smaster smath smemo soffice spadmin svcard sweb swriter
  do ln -v -sf /opt/openoffice/program/$appl /usr/bin/$appl
  done</userinput></screen>

    <para>If you have installed <xref linkend="desktop-file-utils"/> and use
    <application>KDE</application>, there is no furthur configuration
    necessary.  If you use <application>Gnome</application>, you should copy
    the <filename>*.desktop</filename> files to
    <filename>/usr/share/applications</filename> with the following
    commands:</para>

<screen role="root"><userinput>install -v -d /usr/share/applications -m 755 &amp;&amp;
cp -v /opt/openoffice/share/gnome/net/ooo645*.desktop \
    /usr/share/applications/ &amp;&amp;
rename -v ooo645 ooo /usr/share/applications/ooo645*.desktop</userinput></screen>

    <para>Finally, remove the temporary symlinks:</para>

<screen role="root"><userinput>rm /usr/g++-v3 &amp;&amp;
rm /usr/lib/libmawt.so</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><parameter>--with-lang=ENUS</parameter>: Make install set for the
    US English language.</para>

    <para><parameter>--with-dict=ENUS</parameter>: Install dictionaries for
    the US English language.</para>

    <para><parameter>--enable-libart</parameter>: Use libart instead of gpc for
    polygon clipping.</para>

    <para><parameter>--enable-libsn</parameter>: Use
    <application>startup-notification</application>.</para>

    <para><parameter>--without-fonts</parameter>: Do not install Bitstream Vera
    fonts since they are already bundled with <application>X</application>.</para>

    <para><parameter>--with-system-curl</parameter>: Use the system
    installed curl.</para>

    <para><option>--disable-java</option>: Do not build components that need
    java.</para>

    <para><option>--without-gpc</option>: Do not use gpc. Removes polygon
    clipping capability.</para>

    <para><command>./bootstrap</command>: Create packages required to bootstrap
    the build.</para>

    <para><command>dmake</command>: Compile the package.</para>

    <para><command>sed -i "s:^oo_home=...</command>: Remove version specific
    installation directory.</para>

    <para><command>for appl in sagenda scalc sdraw sfax ...;
    do ...</command>: Create links so that the package can be started from the
    command-line without changes to the existing path.</para>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>sagenda, scalc, sdraw, sfax, simpress, slabel,
        sletter, smaster, smath, smemo, soffice, spadmin,
        svcard, sweb, swriter, and support utilities</seg>
        <seg><application>OpenOffice</application> libraries</seg>
        <seg>Not determined at this time</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="sagenda">
        <term><command>sagenda</command></term>
        <listitem>
          <para>create an agenda template and start
          <command>swriter</command>.</para>
          <indexterm zone="openoffice sagenda">
            <primary sortas="b-sagenda">sagenda</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="scalc">
        <term><command>scalc</command></term>
        <listitem>
          <para>spreadsheet application.</para>
          <indexterm zone="openoffice scalc">
            <primary sortas="b-scalc">scalc</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sdraw">
        <term><command>sdraw</command></term>
        <listitem>
          <para>drawing application.</para>
          <indexterm zone="openoffice sdraw">
            <primary sortas="b-sdraw">sdraw</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sfax">
        <term><command>sfax</command></term>
        <listitem>
          <para>create a fax template and start
          <command>swriter</command>.</para>
          <indexterm zone="openoffice sfax">
            <primary sortas="b-sfax">sfax</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="simpress">
        <term><command>simpress</command></term>
        <listitem>
          <para>presentation application.</para>
          <indexterm zone="openoffice simpress">
            <primary sortas="b-simpress">simpress</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="slabel">
        <term><command>slabel</command></term>
        <listitem>
          <para>create a label template and start
          <command>swriter</command>.</para>
          <indexterm zone="openoffice slabel">
            <primary sortas="b-slabel">slabel</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sletter">
        <term><command>sletter</command></term>
        <listitem>
          <para>create a letter template and start
          <command>swriter</command>.</para>
          <indexterm zone="openoffice sletter">
            <primary sortas="b-sletter">sletter</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smaster">
        <term><command>smaster</command></term>
        <listitem>
          <para>creates a new master document.</para>
          <indexterm zone="openoffice smaster">
            <primary sortas="b-smaster">smaster</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smath">
        <term><command>smath</command></term>
        <listitem>
          <para>mathematical formula editor.</para>
          <indexterm zone="openoffice smath">
            <primary sortas="b-smath">smath</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smemo">
        <term><command>smemo</command></term>
        <listitem>
          <para>create a memo template and start
          <command>swriter</command>.</para>
          <indexterm zone="openoffice smemo">
            <primary sortas="b-smemo">smemo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="soffice">
        <term><command>soffice</command></term>
        <listitem>
          <para>opens a base window with access to all
          <application>OpenOffice</application> applications.</para>
          <indexterm zone="openoffice soffice">
            <primary sortas="b-soffice">soffice</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="spadmin">
        <term><command>spadmin</command></term>
        <listitem>
          <para><application>OpenOffice</application> Printer Configuration.
          You may need to run this if you are having any printing
          problems.</para>
          <indexterm zone="openoffice spadmin">
            <primary sortas="b-spadmin">spadmin</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svcard">
        <term><command>svcard</command></term>
        <listitem>
          <para>business card application.</para>
          <indexterm zone="openoffice svcard">
            <primary sortas="b-svcard">svcard</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sweb">
        <term><command>sweb</command></term>
        <listitem>
          <para>an HTML editor.</para>
          <indexterm zone="openoffice sweb">
            <primary sortas="b-sweb">sweb</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="swriter">
        <term><command>swriter</command></term>
        <listitem>
          <para>word processing application.</para>
          <indexterm zone="openoffice swriter">
            <primary sortas="b-swriter">swriter</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
